<div class="abilities flexcol tab" data-group="moves" data-tab="playbook">
    <h1>{{#if (eq system.playbook "")}}Playbook{{else}}{{capitalize system.playbook}}{{/if}} Moves</h1>
    {{#each system.moves.playbook}}
    <div class="ability flexrow flex-group-center">
        <input type="checkbox" name="system.moves.taken.{{@key}}" {{takenMove @key ../system.moves.taken}}>
        <label for="{{@key}}" class="resource-label flexlarge align-left">{{this.title}}</label>
    </div>
    <div>
        {{{this.description}}}
        {{#if (ne this.options "")}}
        {{{this.options}}}
        {{/if}}
    </div>
    {{#if (takenMoveBool @key ../system.moves.taken)}}
    {{#if (gt this.stat.length 0)}}
    <div>
        To make this move,
        {{#each this.rolls as |roll key|}}
        <span class="ability-mod rollable"
              data-roll="2d6{{roll.operator}}{{roll.bonus}}"
              data-label="{{../this.title}}"
              data-attributeLabel="{{roll.attributeLabel}}"
              data-movekey="{{@../key}}"
        >Roll +{{roll.attributeLabel}}</span>{{#unless @last}} OR {{/unless}}{{/each}}.
    </div>
    {{/if}}
    {{/if}}
    {{/each}}

    {{#each system.moves.romance}}
    <div class="ability flexrow flex-group-center">
        <h3 for="{{@key}}" class="resource-label flexlarge align-left">{{this.title}}</h3>
    </div>
    <div>
        {{{this.description}}}
        {{#if (ne this.options "")}}
        {{{this.options}}}
        {{/if}}
    </div>
    {{#if (gt this.stat.length 0)}}
    <div>
        To make this move,
        {{#each this.rolls as |roll key|}}
        <span class="ability-mod rollable"
              data-roll="2d6{{roll.operator}}{{roll.bonus}}"
              data-label="{{../this.title}}"
              data-attributeLabel="{{roll.attributeLabel}}"
              data-movekey="{{@../key}}"
        >Roll +{{roll.attributeLabel}}</span>{{#unless @last}} OR {{/unless}}{{/each}}.
    </div>
    {{/if}}
    {{/each}}

    {{#if system.moves.takenCategories.vortex}}
    <h1>Vortex Moves</h1>
    {{/if}}
    {{#each system.moves.vortex}}
    {{#if (takenMoveBool @key ../system.moves.taken)}}
    <div class="ability flexrow flex-group-center">
        <label for="{{@key}}" class="resource-label flexlarge align-left">{{this.title}}</label>
    </div>
    <div>
        {{{this.description}}}
        {{#if (ne this.options "")}}
        {{{this.options}}}
        {{/if}}
    </div>
        {{#if (gt this.stat.length 0)}}
    <div>
        To make this move,
            {{#each this.rolls as |roll key|}}
        <span class="ability-mod rollable"
              data-roll="2d6{{roll.operator}}{{roll.bonus}}"
              data-label="{{../this.title}}"
              data-attributeLabel="{{roll.attributeLabel}}"
              data-movekey="{{@../key}}"
        >Roll +{{roll.attributeLabel}}</span>{{#unless @last}} OR {{/unless}}{{/each}}.
    </div>
        {{/if}}
    {{/if}}
    {{/each}}

    {{#if system.moves.takenCategories.otherMovesTaken}}
    <h1>Other Moves</h1>
    {{#each system.moves.other}}
    {{#if (lookup ../system.moves.takenCategories.other @key)}}
    <h2>{{capitalize @key}} Moves</h2>
    {{/if}}
    {{#each this}}
    {{#if (takenMoveBool @key ../../system.moves.taken)}}
    <div class="ability flexrow flex-group-center">
        <label for="{{@key}}" class="resource-label flexlarge align-left">{{this.title}}</label>
    </div>
    <div>
        {{{this.description}}}
        {{#if (ne this.options "")}}
        {{{this.options}}}
        {{/if}}
    </div>
    {{#if (gt this.stat.length 0)}}
    <div>
        To make this move,
        {{#each this.rolls as |roll key|}}
        <span class="ability-mod rollable"
              data-roll="2d6{{roll.operator}}{{roll.bonus}}"
              data-label="{{../this.title}}"
              data-attributeLabel="{{roll.attributeLabel}}"
              data-movekey="{{@../key}}"
        >Roll +{{roll.attributeLabel}}</span>{{#unless @last}} OR {{/unless}}{{/each}}.
    </div>
    {{/if}}
    {{/if}}
    {{/each}}
    {{/each}}
    {{/if}}

</div>